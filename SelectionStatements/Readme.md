# Ветвления (Условные конструкции)
*Операторы ветвления* или *условные операторы* - это конструкции в языке программирования, позволяющие выполнять определенные команды в зависимости от заданного условия.

В языке C# такими операторами являются ключевые слова ```if-else``` и ```switch-case```. Первые в качестве условия проверяют истинность заданного логического выражения,
а вторые - значение некоторого выражения.

## Конструкция if-else
Данная конструкция выполняет блок кода в зависимости от значения указанного логического выражение, которое может принимать 2 значения - истина и ложь.

Для использования данной конструкции следует указывать ключевое слово ```if```, следом в скобках проверяемое логическое выражение и затем блок кода в фигурных скобках, который будет
исполнен в случае истинности данного выражения. После данного блока указывается ключевое слово ```else```, и так же в фигурных скобках идет блок кода, исполняемый когда выражение является ложью.

Пример использования:

```csharp
if (2 * 2 == 5)
{
    Console.WriteLine("We are in Orwell's '1984'.");
}
else
{
    Console.WriteLine("We are in the real world.");
}
```
В данном примере по ходу выполнения проверяется, равно ли выражение ```2*2``` пяти. Если это так, то в консоль выводится сообщение о том, что мы в книге "1984" Оруэлла,
в противном случае выводится сообщение о том, что мы находимся в реальном мире.

---
**Стоит отметить важные моменты при использовании данной конструкции:**
### 1. Блок ```else``` можно опустить, если в нем нет никакой логики.
Данное выражение:
```csharp
if (2 * 2 == 5)
{
    Console.WriteLine("We are in Orwell's '1984'.");
}
else
{
}
```
равнозначно этому
```csharp
if (2 * 2 == 5)
{
    Console.WriteLine("We are in Orwell's '1984'.");
}
```
Но второе позволяет сократить написанный код.

### 2. Логическое выражение можно инвертировать.
Когда нам нужно выполнить блок кода только при ложном выражении, полезно будет инвертировать это выражение - т.е. "перевернуть" значение и проверять не само выражение, а его
отрицание.

Инвертировать выражение можно как изменением операторов, например, изменив *равно* (```==```) на *не равно* (```!=```) или *больше* (```>```) на *меньше* (```<```), так
и инверсией всего выражения с помощью оператора ```!```. При использовании оператора ```!``` следует обернуть выражение в скобки (не относится к булевым переменным).

Пример:
```csharp
if (!(2 * 2 == 4))
{
}
```
```csharp
var isOkay = false;
if (!isOkay)
{
}
```

Проверим, холодная ли на улице погода, если это не так, то сообщим о том, что можно выходить на улицу:
```csharp
var isWeatherCold = false;

if (!isWeatherCold)
{
    Console.WriteLine("It is Okay, you can go out!");
}
```

### 3. if-else можно использовать без фигурных скобок, но только в случае выполнения однострочных выражений.
Данное выражение равнозначно тому, что было приведено в первом примере.
```csharp
if (2 * 2 == 5)
    Console.WriteLine("We are in Orwell's '1984'.");
else
    Console.WriteLine("We are in the real world.");
```

### 4. Можно комбинировать ```else``` с ```if``` для проверки других условий, не подходящих под первое.

Если нужно проверить несколько условий, можно сделать это с помощью комбинации ```else if``` после первого условия.

Например, когда нам нужно проверить несколько значений одной переменной:

```csharp
int number;
// Some calculations

if (number == 1)
{
    Console.WriteLine("It is number 1!");
}
else if (number == 2)
{
    Console.WriteLine("It is number 2!");
}
else
{
    Console.WriteLine("It is some other number!")
}
```

Также такой подход может использоваться для проверки условий над разными переменными. Например, проверяя погоду, мы хотим знать, в чём выходить на улицу:
```csharp
var isHot = false;
var isWindy = true;

if (isHot)
{
    Console.WriteLine("Take on light clothes.");
}
else if (isWindy)
{
    Console.WriteLine("Take on a scarf.");
}
else
{
    Console.WriteLine("There is beautiful weather. Just go by that!");
}
```
В данном примере мы проверям, жарко ли на улице, и если это не так - проверяем, дует ли ветер. Поскольку на улице не жарко, мы попадаем в ветку проверки второго условия,
которое фактически будет являться условием ```!isHot && isWindy```.

## Тернарный оператор
Для занесения значения, зависящего от условия, в переменную можно использовать тернарный оператор. Его синтаксис выглядит так:
```[условие] ? [значение при истинном результате] : [значение при ложном результате]```

Пример:
```csharp
var favoriteColor = "Red";
var theme = favoriteColor == "Red" ? "RedTheme" : "GreenTheme";
```

В данном примере в зависимости от условия "Является ли красный цвет любимым" в переменную ```theme``` устанавливается название выбранной темы - красная, либо зеленая.

Также важно понимать, что поскольку результатом конструкции с тернарным оператором является значение, его можно использовать в качестве значения в другом тернарном операторе.

## Конструкция switch-case
Данная конструкция выполняет один из описанных блоков кода в зависимости от значения указанной переменной.

Для использования данной конструкции следует указывать ключевое слово ```switch```, следом в скобках проверяемую переменную и затем внутри фигурных скобок будут располагаться
блоки кода для каждого проверяемого значения. При этом переменная должна иметь один из следующих типов: ```char```, ```bool```, ```string```, одним из целочисленных типов
(например, ```int```, ```long```, ```uint```) или быть перечислением (```enum```).

Данные блоки начинаются с ключевого слова ```case``` и значения переменной, а заканчиваться могут разными способами, один из них - ключевое слово ```break```:

```csharp
int busNumber = 39;

switch (caseSwitch)
{
  case 39:
      Console.WriteLine("We are on our way to home.");
      break;
  case 114:
      Console.WriteLine("We took the wrong bus.");
      break;
}
```
В данном примере проверяется номер автобуса - если это 39-ый автобус, то мы на верном пути домой, если же это 114-ый, то мы ошиблись автобусом.

### Операторы перехода
Поскольку мы упомянули, что блоки кода для каждого значения могут заканчиваться по разному, разберем все возможные варианты:

**1. Оператор окончания блока кода и выхода из выражения ```switch``` — Оператор ```break```.**

При использовании данного оператора, после выполнения вышестоящего блока кода, программа выходит из выражения ```switch```, тем самым исполнив только блок кода с
соответствующим значением, объявленном после ```case```.

**2. Оператор возврата значения и выхода из функции — Оператор ```return```.**

Данный оператор возвращает значение функции и прерывает дальнейшее выполнение кода, расположенного ниже данного блока и ```switch```-выражения в целом.

**3. Оператор перехода к указанному блоку кода — Оператор ```goto case```.**

При достижении данного оператора в коде, начинает выполняться другой блок кода, на который и указывает ```goto case```. Выход из выражения ```switch``` уже будет зависеть от оператора в последнем исполняемом блоке.

**4. Оператор выброса исключения — Оператор ```throw```.**

Данный оператор работает с исключениями, о которых будет рассказано позднее в курсе.

**5. Отсутствие оператора.**

Также блок кода может иметь только обозначение с использованием ```case```, но без тела блока и оператора перехода. В таком случае будет выполняться идущий следом блок кода.

Пример использования разных операторов:

```csharp
IceCreamType type;
int price = 0;

switch (type)
{
    case IceCreamType.LargeWithSirup:
    case IceCreamType.Large:
        price = 80;
        break;
    case IceCreamType.Small:
        price += 25;
        return price;
    case IceCreamType.Medium:
        price += 25;
        goto case IceCreamType.Small;
}

return price;
```

В данном примере через конструкцию ```switch``` устроено определение стоимости мороженого, в зависимости от его размера: маленькое - 25 рублей, среднее - на 25 дороже
(т.е. 50) и большое, либо большое с сиропом - 80 рублей. Когда выбран маленький размер, исполняется блок кода ```case IceCreamType.Small:``` и результат возвращается из функции.
Когда же размер мороженого - средний, происходит выполнения кода в нужном блоке, а вместе с ним и выполнение кода для маленького размера с помощью оператора
```goto case```. А для большого мороженого (с сиропом или без) происходит исполнение кода ```case IceCreamType.Large:``` и выход из конструкции ```switch```.


### Остальные значения
Поскольку мы не всегда можем перечислить все возможные значения переменной в конструкции ```switch``` существует специальный оператор ```default```.

Исполнения кода в блоке ```default``` происходит в 2 случаях:
* Если переменная принимает отличное от всех перечисленных в конструкциях ```case``` значений.
* Если исполнявшийся блок кода не был завершен оператором перехода.

Таким образом, можно назначить логику для исполнения при неперечисленных значениях проверяемой переменной.

Пример:
```csharp
int testGrade = GetGrade();

switch (testGrade)
{
    case 5:
        Console.WriteLine("Excellent work!");
        break;
    case 4:
        Console.WriteLine("Good work.");
        break;
    case 3:
        Console.WriteLine("Try harder next time.");
        break;
    case 2:
    case 1:
        Console.WriteLine("You have not passed the test.");
        break;
    default:
        Console.WriteLine("Incorrect grade!");
        break;
}
```
В данном примере через конструкцию switch проверяется оценка за тест, где оценки *5*, *4* и *3* - тест сдан и выводятся различные комментарии; оценки *2*, *1* - тест не сдан;
остальные значения (например *0* или *6*) - сигнализируют о неверной оценке.

### Иное применение

По ходу изучения языка C# вы встретите иные конструкции, использующие оператор ```switch```, но с более широкой логикой выбора. Об этом Вы узнаете по ходу курса.

